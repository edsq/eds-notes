

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Project Management with PDM &#8212; Ed&#39;s Notes: Physics, Math, and Python</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'python_notes/pwg_presentation/part1';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Publishing on (Test)PyPI" href="part2.html" />
    <link rel="prev" title="Project Management and Publishing with PDM" href="intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo_light.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../_static/logo_dark.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Python Notes</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="intro.html">Project Management and Publishing with PDM</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Project Management with PDM</a></li>
<li class="toctree-l2"><a class="reference internal" href="part2.html">Publishing on (Test)PyPI</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/edsq/eds-notes" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/python_notes/pwg_presentation/part1.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Project Management with PDM</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#requirements">Requirements</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#set-the-python-version-and-initialize-the-project">Set the python version and initialize the project</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pdm-init-options"><code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">init</span></code> options</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-pdm-project">The PDM project</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-pyproject-toml-file">The <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-code">Adding code</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-a-module">Add a module</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install-the-project">Install the project</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-pdm-lock-file">The <code class="docutils literal notranslate"><span class="pre">pdm.lock</span></code> file</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#add-a-dependency">Add a dependency</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-did-pdm-add-do">What did <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">add</span></code> do?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-more-code">Adding more code</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#add-a-development-dependency">Add a development dependency</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-did-pdm-add-d-do">What did <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">add</span> <span class="pre">-d</span></code> do?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-black">Using black</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-did-black-do">What did <code class="docutils literal notranslate"><span class="pre">black</span></code> do?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="project-management-with-pdm">
<h1>Project Management with PDM<a class="headerlink" href="#project-management-with-pdm" title="Permalink to this headline">#</a></h1>
<p>Part 1 of notes from talk given to the WSU Python Working Group on February 8, 2023.  See Part 2 <a class="reference internal" href="part2.html"><span class="doc std std-doc">here</span></a>.</p>
<p>In this chapter, I show the basics of project management with <a class="reference external" href="https://pdm.fming.dev/latest/">PDM</a>: how to create a project,
add dependencies, and add development dependencies.</p>
<p>This tutorial is primarily aimed at macOS and Linux users, although the commands for Windows should mostly translate.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A companion repository with the example project created in these notes is available <a class="reference external" href="https://github.com/edsq/eeskew-pwg-test-000">here</a>.</p>
</div>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>The ability to get python executables of different versions, such as with <a class="reference external" href="https://github.com/pyenv/pyenv">pyenv</a> or <a class="reference external" href="https://docs.conda.io/en/latest/miniconda.html">conda</a></p></li>
<li><p><a class="reference external" href="https://pdm.fming.dev/latest/">PDM</a> available globally</p></li>
</ul>
<p>The version of PDM these notes use is:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>--version
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">PDM</span>, version <span class=" -Color -Color-Green">2.5.3</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="set-the-python-version-and-initialize-the-project">
<h2>Set the python version and initialize the project<a class="headerlink" href="#set-the-python-version-and-initialize-the-project" title="Permalink to this headline">#</a></h2>
<p>First, create the project directory and <code class="docutils literal notranslate"><span class="pre">cd</span></code> into it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">eeskew</span><span class="o">-</span><span class="n">pwg</span><span class="o">-</span><span class="n">test</span><span class="o">-</span><span class="mi">000</span>
<span class="n">cd</span> <span class="n">eeskew</span><span class="o">-</span><span class="n">pwg</span><span class="o">-</span><span class="n">test</span><span class="o">-</span><span class="mi">000</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Because this is a throwaway test project, it is important that you give your project a name that won’t conflict with any other package on PyPI or TestPyPI. Adding your name and some numbers is a good way to ensure this.</p>
</div>
<p>Here, we’ll use python version 3.11, but you may change this to be whatever you like.  I’ll cover two methods of setting the python version: using <a class="reference external" href="https://github.com/pyenv/pyenv"><code class="docutils literal notranslate"><span class="pre">pyenv</span></code></a>, and using <a class="reference external" href="https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html"><code class="docutils literal notranslate"><span class="pre">conda</span></code></a>.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
Using <code class="docutils literal notranslate"><span class="pre">pyenv</span></code></label><div class="sd-tab-content docutils">
<p>Install python 3.11 if it is not already (see installed versions with <code class="docutils literal notranslate"><span class="pre">pyenv</span> <span class="pre">versions</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pyenv</span> <span class="n">install</span> <span class="mf">3.11</span>
</pre></div>
</div>
<p>Set the local python version for this project and initialize using that version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pyenv</span> <span class="n">local</span> <span class="mf">3.11</span>
<span class="n">pdm</span> <span class="n">init</span> <span class="o">--</span><span class="n">python</span> <span class="n">python</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">pyenv</span> <span class="pre">local</span></code> creates a file <code class="docutils literal notranslate"><span class="pre">.python-version</span></code>, which <code class="docutils literal notranslate"><span class="pre">pyenv</span></code> reads and redirects the command <code class="docutils literal notranslate"><span class="pre">python</span></code> to the installed <code class="docutils literal notranslate"><span class="pre">python3.11</span></code>.  Thus, we only need to tell pdm to use the usual <code class="docutils literal notranslate"><span class="pre">python</span></code> executable.</p>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-1">
Using <code class="docutils literal notranslate"><span class="pre">conda</span></code></label><div class="sd-tab-content docutils">
<p>PDM can use <code class="docutils literal notranslate"><span class="pre">conda</span></code> to create your virtual environment.  To do this simply, we create the virtual environment before initializing the project, so that we can pass the right python executable to <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">init</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdm</span> <span class="n">venv</span> <span class="n">create</span> <span class="o">-</span><span class="n">w</span> <span class="n">conda</span> <span class="mf">3.11</span>
<span class="n">pdm</span> <span class="n">init</span> <span class="o">--</span><span class="n">python</span> <span class="o">.</span><span class="n">venv</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python</span>
</pre></div>
</div>
</div>
</div>
<section id="pdm-init-options">
<h3><code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">init</span></code> options<a class="headerlink" href="#pdm-init-options" title="Permalink to this headline">#</a></h3>
<p>For</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Would you like to create a virtualenv with &lt;path-to-python&gt;? [y/n] (y):
</pre></div>
</div>
<p>Ensure you select <code class="docutils literal notranslate"><span class="pre">y</span></code>.  Otherwise, PDM will operate in “PEP 582 mode” - see note on this below.</p>
<p>For</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Is the project a library that is installable?
If yes, we will need to ask a few more questions to include the project name and build backend [y/n] (n):
</pre></div>
</div>
<p>select <code class="docutils literal notranslate"><span class="pre">y</span></code>.  Otherwise, all the default options should be good, except where you want to fill in your own information (project description, email, etc).</p>
</section>
</section>
<section id="the-pdm-project">
<h2>The PDM project<a class="headerlink" href="#the-pdm-project" title="Permalink to this headline">#</a></h2>
<p>Let’s take a look at what we’ve created:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls<span class="w"> </span>-a
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold -Color-Bold-Blue">.</span>   <span class=" -Color -Color-Bold -Color-Bold-Blue">.git</span>        .pdm-python      <span class=" -Color -Color-Bold -Color-Bold-Blue">.venv</span>      pyproject.toml
<span class=" -Color -Color-Bold -Color-Bold-Blue">..</span>  .gitignore  .python-version  README.md
</pre></div>
</div>
</div>
</div>
<p>The relevant files created are the <code class="docutils literal notranslate"><span class="pre">README.md</span></code>; <code class="docutils literal notranslate"><span class="pre">.pdm.toml</span></code>, which holds local configuration for this PDM project; and <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>, which holds project tool configuration and package metadata.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>PDM has also created a virtual environment for us in the <code class="docutils literal notranslate"><span class="pre">.venv</span></code> directory.  This is where our package and its dependencies will be installed.  If you are unfamiliar with virtual environments, I recommend <a class="reference external" href="https://realpython.com/python-virtual-environments-a-primer/">this article</a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>PDM supports the rejected Python Enhancement Proposal (PEP) <a class="reference external" href="https://peps.python.org/pep-0582/">582</a>.  An alternative to virtual environments, PEP 582 would automatically get dependencies from a <code class="docutils literal notranslate"><span class="pre">__pypackages__</span></code> directory in the project root, without having to activate a virtualenv.  See the PDM docs on PEP 582 <a class="reference external" href="https://pdm.fming.dev/latest/usage/pep582/">here</a>.  We will not be using PEP 582 mode in this tutorial.</p>
</div>
<section id="the-pyproject-toml-file">
<h3>The <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file<a class="headerlink" href="#the-pyproject-toml-file" title="Permalink to this headline">#</a></h3>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p>The central location of our project configuration is <a class="reference external" href="https://github.com/edsq/eeskew-pwg-test-000/tree/52e0b0893775a6d5881fda9d5de8b154d5588ae3/pyproject.toml"><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code></a>:</p>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># pyproject.toml</span>
<span class="k">[tool.pdm]</span>

<span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;eeskew-pwg-test-000&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;0.1.0&quot;</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;A test project for presentation to the WSU Python Working Group.&quot;</span>
<span class="n">authors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Edward Eskew&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;edward.eskew@wsu.edu&quot;</span><span class="p">},</span>
<span class="p">]</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&gt;=3.11&quot;</span>
<span class="n">readme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;README.md&quot;</span>
<span class="n">license</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;MIT&quot;</span><span class="p">}</span>

<span class="k">[build-system]</span>
<span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;pdm-pep517&gt;=1.0&quot;</span><span class="p">]</span>
<span class="n">build-backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;pdm.pep517.api&quot;</span>
</pre></div>
</div>
</div>
</div>
<p>This file is written in <code class="docutils literal notranslate"><span class="pre">.toml</span></code> format, which stands for <a class="reference external" href="https://toml.io/en/">Tom’s Obvious Minimal Language</a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">tool.pdm</span></code> table is empty, although we’ll add things here later on.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">project</span></code> table contains the metadata needed to install our project.  Its values thus far were set by the options we chose while running <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">init</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">build-system</span></code> section tells the build frontend (e.g. <code class="docutils literal notranslate"><span class="pre">pip</span></code>) what build backend to use - the build backend is what will actually create the distribution artifacts (wheels and sdists), which we’ll see later.  See <a class="reference external" href="https://peps.python.org/pep-0517/">PEP 517</a> for more information.  Here, we’re just using the default PDM backend.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See the <a class="reference external" href="https://pdm.fming.dev/latest/reference/pep621/">PDM docs on writing <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code></a> for more on what can be specified in this file.</p>
</div>
</section>
</section>
<section id="adding-code">
<h2>Adding code<a class="headerlink" href="#adding-code" title="Permalink to this headline">#</a></h2>
<p>First we create our package directory in <a class="reference external" href="https://hynek.me/articles/testing-packaging/">src layout</a>, with an empty (for now) <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file to indicate that it is a python package:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>src
mkdir<span class="w"> </span>src/eeskew_pwg_test_000
touch<span class="w"> </span>src/eeskew_pwg_test_000/__init__.py
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By convention, we use <a class="reference external" href="https://en.wikipedia.org/wiki/Snake_case">snake_case</a> for the package name, while we use <a class="reference external" href="https://en.wiktionary.org/wiki/kebab_case">kebab-case</a> for the repository name.</p>
</div>
<section id="add-a-module">
<h3>Add a module<a class="headerlink" href="#add-a-module" title="Permalink to this headline">#</a></h3>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p>Let’s add some code in <a class="reference external" href="https://github.com/edsq/eeskew-pwg-test-000/tree/fe7dbabe72819019cb909a4e2656c465009b2d01/src/eeskew_pwg_test_000/sarcasm.py"><code class="docutils literal notranslate"><span class="pre">src/eeskew_pwg_test_000/sarcasm.py</span></code></a>:</p>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># src/eeskew_pwg_test_000/sarcasm.py</span>
<span class="k">def</span> <span class="nf">sarcasm</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert string `s` to sArCaSm TeXt.&quot;&quot;&quot;</span>
    <span class="n">out</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">+=</span> <span class="n">c</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">+=</span> <span class="n">c</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">out</span>
</pre></div>
</div>
</div>
</div>
<p>The actual content of this code is not too important for the purposes of these notes, but for completeness, all it does is capitalize and lowercase alternating letters in a string.</p>
</section>
</section>
<section id="install-the-project">
<h2>Install the project<a class="headerlink" href="#install-the-project" title="Permalink to this headline">#</a></h2>
<p>To make our code available in the virtual environment, we have to install it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>install
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Yellow">Lock file does not exist</span>
<span class=" -Color -Color-Green">Updating the lock file</span><span class=" -Color -Color-Yellow">...</span>
?25l<span class=" -Color -Color-Cyan">⠋</span> Fetching hashes for resolved packages...
🔒 Lock successful
Changes are written to <span class=" -Color -Color-Green">pdm.lock</span>.
?25l<span class=" -Color -Color-Cyan">⠋</span> Fetching hashes for resolved packages...
All packages are synced to date, nothing to do.
Installing the project as an editable package...
  <span class=" -Color -Color-Green">✔</span> Install <span class=" -Color -Color-Bold -Color-Bold-Green">eeskew-pwg-test-000</span> <span class=" -Color -Color-Yellow">0.1.0</span> successful

🎉 All complete!

?25h
</pre></div>
</div>
</div>
</div>
<p>Now we can import our package:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;from eeskew_pwg_test_000.sarcasm import sarcasm; print(sarcasm(&quot;Hello world!&quot;))&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>hElLo wOrLd!
</pre></div>
</div>
</div>
</div>
<p>Note we have to type <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">run</span></code> before our command for it to be run within our project environment.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you don’t want to type <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">run</span></code> every time before a command to be run in the project virtual environment, you can <em>activate</em> the environment, which will modify your <code class="docutils literal notranslate"><span class="pre">sys.prefix</span></code> to point to the <code class="docutils literal notranslate"><span class="pre">.venv</span></code> directory.  See the python <code class="docutils literal notranslate"><span class="pre">venv</span></code> docs <a class="reference external" href="https://docs.python.org/3/library/venv.html#how-venvs-work">here</a> for more on how virtual environments work.</p>
<p><code class="docutils literal notranslate"><span class="pre">pdm</span></code> will print the command to activate the project virtual environment with the command <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">venv</span> <span class="pre">activate</span></code>.  You can copy and paste that output, or, if you want to activate the environment in one line, use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">eval</span><span class="w"> </span><span class="k">$(</span>pdm<span class="w"> </span>venv<span class="w"> </span>activate<span class="k">)</span>
</pre></div>
</div>
<p>To simplify things further, add this as an alias to your <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> or <code class="docutils literal notranslate"><span class="pre">~/.bash_profile</span></code> (and don’t forget to restart your shell or <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">~/.bashrc</span></code> after):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ~/.bashrc</span>
<span class="nb">alias</span><span class="w"> </span>pdm-activate<span class="o">=</span><span class="s1">&#39;eval $(pdm venv activate)&#39;</span>
</pre></div>
</div>
<p>This will let you activate the environment with the command <code class="docutils literal notranslate"><span class="pre">pdm-activate</span></code>.</p>
<p>You can deactivate an active virtual environment with the command <code class="docutils literal notranslate"><span class="pre">deactivate</span></code>.  See also the <a class="reference external" href="https://pdm.fming.dev/latest/usage/venv/#activate-a-virtualenv">PDM docs on virtualenv activation</a>.</p>
</div>
<section id="the-pdm-lock-file">
<h3>The <code class="docutils literal notranslate"><span class="pre">pdm.lock</span></code> file<a class="headerlink" href="#the-pdm-lock-file" title="Permalink to this headline">#</a></h3>
<p>Running <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">install</span></code> also created a new file, <code class="docutils literal notranslate"><span class="pre">pdm.lock</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>README.md  pdm.lock  pyproject.toml  <span class=" -Color -Color-Bold -Color-Bold-Blue">src</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># pdm.lock</span>
<span class="c1"># This file is @generated by PDM.</span>
<span class="c1"># It is not intended for manual editing.</span>

<span class="k">[metadata]</span>
<span class="n">lock_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;4.2&quot;</span>
<span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;default&quot;</span><span class="p">]</span>
<span class="n">content_hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;sha256:86165c41f17b4b263a688544a3ebc55eccc1713dd177c40649b2e936dab66751&quot;</span>

<span class="k">[metadata.files]</span>
</pre></div>
</div>
</div>
</div>
<p>This is a lockfile, which will contain the exact versions of each project dependency we install.  It is useful for creating a perfect reproduction of the project virtual environment, which keeps our development reproducible over time and across different machines.</p>
<p>Right now, we have not installed anything other than the project itself, so it is essentially empty.</p>
</section>
</section>
<section id="add-a-dependency">
<h2>Add a dependency<a class="headerlink" href="#add-a-dependency" title="Permalink to this headline">#</a></h2>
<p>Let’s add a dependency to our project, <a class="reference external" href="https://pypi.org/project/cowsay/">cowsay</a>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>add<span class="w"> </span>cowsay
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Adding packages to <span class=" -Color -Color-Cyan">default</span> dependencies: <span class=" -Color -Color-Bold -Color-Bold-Green">cowsay</span>
<span class=" -Color -Color-Cyan">⠋</span> Fetching hashes for resolved packages...
🔒 Lock successful
Changes are written to <span class=" -Color -Color-Green">pyproject.toml</span>.
?25l<span class=" -Color -Color-Cyan">⠋</span> Fetching hashes for resolved packages...
<span class=" -Color -Color-Bold">Synchronizing working set with lock file</span>: <span class=" -Color -Color-Green">1</span> to add, <span class=" -Color -Color-Yellow">0</span> to update, <span class=" -Color -Color-Red">0</span> to remove

  <span class=" -Color -Color-Green">✔</span> Install <span class=" -Color -Color-Bold -Color-Bold-Green">cowsay</span> <span class=" -Color -Color-Yellow">5.0</span> successful
Installing the project as an editable package...
  <span class=" -Color -Color-Green">✔</span> Update <span class=" -Color -Color-Bold -Color-Bold-Green">eeskew-pwg-test-000</span> <span class=" -Color -Color-Yellow">0.1.0</span> -&gt; <span class=" -Color -Color-Yellow">0.1.0</span> successful

🎉 All complete!

?25h
</pre></div>
</div>
</div>
</div>
<section id="what-did-pdm-add-do">
<h3>What did <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">add</span></code> do?<a class="headerlink" href="#what-did-pdm-add-do" title="Permalink to this headline">#</a></h3>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p><code class="docutils literal notranslate"><span class="pre">cowsay</span></code> now appears as a dependency in <a class="reference external" href="https://github.com/edsq/eeskew-pwg-test-000/tree/fcc083809724f6472f436beb22d76abfca56342c/pyproject.toml"><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code></a>:</p>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># pyproject.toml</span>
<span class="p">...</span>

<span class="n">authors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Edward Eskew&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;edward.eskew@wsu.edu&quot;</span><span class="p">},</span>
<span class="p">]</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s">&quot;cowsay&gt;=5.0&quot;</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&gt;=3.11&quot;</span>
<span class="n">readme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;README.md&quot;</span>
<span class="n">license</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;MIT&quot;</span><span class="p">}</span>

<span class="p">...</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p>We’ve also updated <a class="reference external" href="https://github.com/edsq/eeskew-pwg-test-000/tree/fcc083809724f6472f436beb22d76abfca56342c/pdm.lock"><code class="docutils literal notranslate"><span class="pre">pdm.lock</span></code></a> to include cowsay:</p>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># pdm.lock</span>
<span class="c1"># This file is @generated by PDM.</span>
<span class="c1"># It is not intended for manual editing.</span>

<span class="k">[[package]]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;cowsay&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;5.0&quot;</span>
<span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;The famous cowsay for GNU/Linux is now available for python&quot;</span>

<span class="k">[metadata]</span>
<span class="n">lock_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;4.2&quot;</span>
<span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;default&quot;</span><span class="p">]</span>
<span class="n">content_hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;sha256:a04c8eb9409090bc9acb94e5cec5ef19afdecacb2c169628142af5ca472135f0&quot;</span>

<span class="k">[metadata.files]</span>
<span class="s">&quot;cowsay 5.0&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://files.pythonhosted.org/packages/6b/b8/9f497fd045d74fe21d91cbe8debae0b451229989e35b539d218547d79fc6/cowsay-5.0.tar.gz&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;sha256:c00e02444f5bc7332826686bd44d963caabbaba9a804a63153822edce62bbbf3&quot;</span><span class="p">},</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>We can now import <code class="docutils literal notranslate"><span class="pre">cowsay</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;import cowsay; cowsay.cow(&quot;moo!&quot;)&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  ____
| moo! |
  ====
    \
     \
       ^__^
       (oo)\_______
       (__)\       )\/\
           ||----w |
           ||     ||
</pre></div>
</div>
</div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See the <a class="reference external" href="https://pdm.fming.dev/latest/usage/dependency/">PDM docs on managing dependencies</a> for more information.</p>
</div>
</section>
<section id="adding-more-code">
<h3>Adding more code<a class="headerlink" href="#adding-more-code" title="Permalink to this headline">#</a></h3>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p>Let’s add a new function to <a class="reference external" href="https://github.com/edsq/eeskew-pwg-test-000/tree/23a1ec1d6970c840e3a801a4b8d5ab3f13f70533/src/eeskew_pwg_test_000/sarcasm.py"><code class="docutils literal notranslate"><span class="pre">src/eeskew_pwg_test_000/sarcasm.py</span></code></a>:</p>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># src/eeskew_pwg_test_000/sarcasm.py</span>
<span class="kn">import</span> <span class="nn">cowsay</span>


<span class="o">...</span>


<span class="k">def</span> <span class="nf">sarcastic_cowsay</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cowsay `s`, sArCaStIcAlLy.&quot;&quot;&quot;</span>
    <span class="n">sarcastic_s</span> <span class="o">=</span> <span class="n">sarcasm</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="n">cowsay</span><span class="o">.</span><span class="n">cow</span><span class="p">(</span><span class="n">sarcastic_s</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We can now run this new function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;from eeskew_pwg_test_000.sarcasm import sarcastic_cowsay; sarcastic_cowsay(&quot;mooo!&quot;)&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  _____
| mOoO! |
  =====
     \
      \
        ^__^
        (oo)\_______
        (__)\       )\/\
            ||----w |
            ||     ||
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We didn’t have to re-run <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">install</span></code> to use our new function - this is because PDM installs our <code class="docutils literal notranslate"><span class="pre">eeskew_pwg_test_000</span></code> package in “editable mode”, which acts sort of like a symlink between the source code and the installed files in the <code class="docutils literal notranslate"><span class="pre">.venv</span></code> directory.</p>
</div>
</section>
</section>
<section id="add-a-development-dependency">
<h2>Add a development dependency<a class="headerlink" href="#add-a-development-dependency" title="Permalink to this headline">#</a></h2>
<p>The dependencies listed in the <code class="docutils literal notranslate"><span class="pre">project.dependencies</span></code> section of <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> will all be installed when someone runs <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">eeskew-pwg-test-000</span></code>.  What if we have dependencies we only want in our development environment?</p>
<p>Let’s add <code class="docutils literal notranslate"><span class="pre">black</span></code>, a tool to automatically format our code:</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>add<span class="w"> </span>-d<span class="w"> </span>black
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Blue">Adding group </span><span class=" -Color -Color-Green">dev</span><span class=" -Color -Color-Blue"> to lockfile</span>
Adding packages to <span class=" -Color -Color-Cyan">dev</span> dev-dependencies: <span class=" -Color -Color-Bold -Color-Bold-Green">black</span>
<span class=" -Color -Color-Cyan">⠇</span> Fetching hashes for resolved packages...
🔒 Lock successful
Changes are written to <span class=" -Color -Color-Green">pyproject.toml</span>.
?25l<span class=" -Color -Color-Cyan">⠋</span> Fetching hashes for resolved packages...
<span class=" -Color -Color-Bold">Synchronizing working set with lock file</span>: <span class=" -Color -Color-Green">6</span> to add, <span class=" -Color -Color-Yellow">0</span> to update, <span class=" -Color -Color-Red">0</span> to remove

  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">black</span> <span class=" -Color -Color-Yellow">23.3.0</span>...
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">black</span> <span class=" -Color -Color-Yellow">23.3.0</span>...         
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">click</span> <span class=" -Color -Color-Yellow">8.1.3</span>...          
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">black</span> <span class=" -Color -Color-Yellow">23.3.0</span>...         
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">click</span> <span class=" -Color -Color-Yellow">8.1.3</span>...          
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">mypy-extensions</span> <span class=" -Color -Color-Yellow">1.0.0</span>...
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">black</span> <span class=" -Color -Color-Yellow">23.3.0</span>...         
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">click</span> <span class=" -Color -Color-Yellow">8.1.3</span>...          
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">mypy-extensions</span> <span class=" -Color -Color-Yellow">1.0.0</span>...
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">packaging</span> <span class=" -Color -Color-Yellow">23.1</span>...       
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">black</span> <span class=" -Color -Color-Yellow">23.3.0</span>...         
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">click</span> <span class=" -Color -Color-Yellow">8.1.3</span>...          
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">mypy-extensions</span> <span class=" -Color -Color-Yellow">1.0.0</span>...
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">packaging</span> <span class=" -Color -Color-Yellow">23.1</span>...       
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">pathspec</span> <span class=" -Color -Color-Yellow">0.11.1</span>...      
  <span class=" -Color -Color-Green">✔</span> Install <span class=" -Color -Color-Bold -Color-Bold-Green">mypy-extensions</span> <span class=" -Color -Color-Yellow">1.0.0</span> successful
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">black</span> <span class=" -Color -Color-Yellow">23.3.0</span>...         
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">click</span> <span class=" -Color -Color-Yellow">8.1.3</span>...          
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">mypy-extensions</span> <span class=" -Color -Color-Yellow">1.0.0</span>...
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">packaging</span> <span class=" -Color -Color-Yellow">23.1</span>...       
  <span class=" -Color -Color-Cyan">⠋</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">pathspec</span> <span class=" -Color -Color-Yellow">0.11.1</span>...      
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">black</span> <span class=" -Color -Color-Yellow">23.3.0</span>...      
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">click</span> <span class=" -Color -Color-Yellow">8.1.3</span>...       
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">packaging</span> <span class=" -Color -Color-Yellow">23.1</span>...    
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">pathspec</span> <span class=" -Color -Color-Yellow">0.11.1</span>...   
  <span class=" -Color -Color-Green">✔</span> Install <span class=" -Color -Color-Bold -Color-Bold-Green">pathspec</span> <span class=" -Color -Color-Yellow">0.11.1</span> successful
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">black</span> <span class=" -Color -Color-Yellow">23.3.0</span>...      
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">click</span> <span class=" -Color -Color-Yellow">8.1.3</span>...       
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">packaging</span> <span class=" -Color -Color-Yellow">23.1</span>...    
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">pathspec</span> <span class=" -Color -Color-Yellow">0.11.1</span>...   
  <span class=" -Color -Color-Green">✔</span> Install <span class=" -Color -Color-Bold -Color-Bold-Green">platformdirs</span> <span class=" -Color -Color-Yellow">3.4.0</span> successful
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">black</span> <span class=" -Color -Color-Yellow">23.3.0</span>...      
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">click</span> <span class=" -Color -Color-Yellow">8.1.3</span>...       
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">packaging</span> <span class=" -Color -Color-Yellow">23.1</span>...    
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">pathspec</span> <span class=" -Color -Color-Yellow">0.11.1</span>...   
  <span class=" -Color -Color-Green">✔</span> Install <span class=" -Color -Color-Bold -Color-Bold-Green">packaging</span> <span class=" -Color -Color-Yellow">23.1</span> successful
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">black</span> <span class=" -Color -Color-Yellow">23.3.0</span>...      
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">click</span> <span class=" -Color -Color-Yellow">8.1.3</span>...       
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">packaging</span> <span class=" -Color -Color-Yellow">23.1</span>...    
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">pathspec</span> <span class=" -Color -Color-Yellow">0.11.1</span>...   
  <span class=" -Color -Color-Green">✔</span> Install <span class=" -Color -Color-Bold -Color-Bold-Green">click</span> <span class=" -Color -Color-Yellow">8.1.3</span> successful
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">black</span> <span class=" -Color -Color-Yellow">23.3.0</span>...      
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">click</span> <span class=" -Color -Color-Yellow">8.1.3</span>...       
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">packaging</span> <span class=" -Color -Color-Yellow">23.1</span>...    
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">pathspec</span> <span class=" -Color -Color-Yellow">0.11.1</span>...   
  <span class=" -Color -Color-Green">✔</span> Install <span class=" -Color -Color-Bold -Color-Bold-Green">black</span> <span class=" -Color -Color-Yellow">23.3.0</span> successful
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">black</span> <span class=" -Color -Color-Yellow">23.3.0</span>...      
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">click</span> <span class=" -Color -Color-Yellow">8.1.3</span>...       
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">packaging</span> <span class=" -Color -Color-Yellow">23.1</span>...    
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">pathspec</span> <span class=" -Color -Color-Yellow">0.11.1</span>...   

🎉 All complete!
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">black</span> <span class=" -Color -Color-Yellow">23.3.0</span>...      
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">click</span> <span class=" -Color -Color-Yellow">8.1.3</span>...       
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">packaging</span> <span class=" -Color -Color-Yellow">23.1</span>...    
  <span class=" -Color -Color-Cyan">⠙</span> Installing <span class=" -Color -Color-Bold -Color-Bold-Green">pathspec</span> <span class=" -Color -Color-Yellow">0.11.1</span>...   

?25h
</pre></div>
</div>
</div>
</div>
<section id="what-did-pdm-add-d-do">
<h3>What did <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">add</span> <span class="pre">-d</span></code> do?<a class="headerlink" href="#what-did-pdm-add-d-do" title="Permalink to this headline">#</a></h3>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p>We’ve added a new <code class="docutils literal notranslate"><span class="pre">[dev-dependencies]</span></code> sub-table to the <code class="docutils literal notranslate"><span class="pre">[tool.pdm]</span></code> table of <a class="reference external" href="https://github.com/edsq/eeskew-pwg-test-000/tree/ea8ea21fe8bdd22b165912eb42b562368b2058c4/pyproject.toml"><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code></a>, which contains <code class="docutils literal notranslate"><span class="pre">black</span></code>:</p>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># pyproject.toml</span>
<span class="k">[tool.pdm]</span>
<span class="k">[tool.pdm.dev-dependencies]</span>
<span class="n">dev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s">&quot;black&gt;=23.3.0&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">[project]</span>

<span class="p">...</span>
</pre></div>
</div>
</div>
</div>
<p>When we run <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">install</span></code>, by default, PDM will install dependencies from here in addition to the dependencies listed in <code class="docutils literal notranslate"><span class="pre">[project.dependencies]</span></code>.  A different tool like <code class="docutils literal notranslate"><span class="pre">pip</span></code>, however, will not.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See the <a class="reference external" href="https://pdm.fming.dev/latest/usage/dependency/#add-development-only-dependencies">PDM docs on adding development dependencies</a> for more information on development dependencies.</p>
</div>
<p>The lockfile has also been updated:</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>pdm.lock
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span># This file is @generated by PDM.
# It is not intended for manual editing.

[[package]]
name = &quot;black&quot;
version = &quot;23.3.0&quot;
requires_python = &quot;&gt;=3.7&quot;
summary = &quot;The uncompromising code formatter.&quot;
dependencies = [
    &quot;click&gt;=8.0.0&quot;,
    &quot;mypy-extensions&gt;=0.4.3&quot;,
    &quot;packaging&gt;=22.0&quot;,
    &quot;pathspec&gt;=0.9.0&quot;,
    &quot;platformdirs&gt;=2&quot;,
]

[[package]]
name = &quot;click&quot;
version = &quot;8.1.3&quot;
requires_python = &quot;&gt;=3.7&quot;
summary = &quot;Composable command line interface toolkit&quot;
dependencies = [
    &quot;colorama; platform_system == \&quot;Windows\&quot;&quot;,
]

[[package]]
name = &quot;colorama&quot;
version = &quot;0.4.6&quot;
requires_python = &quot;!=3.0.*,!=3.1.*,!=3.2.*,!=3.3.*,!=3.4.*,!=3.5.*,!=3.6.*,&gt;=2.7&quot;
summary = &quot;Cross-platform colored terminal text.&quot;

[[package]]
name = &quot;cowsay&quot;
version = &quot;5.0&quot;
summary = &quot;The famous cowsay for GNU/Linux is now available for python&quot;

[[package]]
name = &quot;mypy-extensions&quot;
version = &quot;1.0.0&quot;
requires_python = &quot;&gt;=3.5&quot;
summary = &quot;Type system extensions for programs checked with the mypy type checker.&quot;

[[package]]
name = &quot;packaging&quot;
version = &quot;23.1&quot;
requires_python = &quot;&gt;=3.7&quot;
summary = &quot;Core utilities for Python packages&quot;

[[package]]
name = &quot;pathspec&quot;
version = &quot;0.11.1&quot;
requires_python = &quot;&gt;=3.7&quot;
summary = &quot;Utility library for gitignore style pattern matching of file paths.&quot;

[[package]]
name = &quot;platformdirs&quot;
version = &quot;3.4.0&quot;
requires_python = &quot;&gt;=3.7&quot;
summary = &quot;A small Python package for determining appropriate platform-specific dirs, e.g. a \&quot;user data dir\&quot;.&quot;

[metadata]
lock_version = &quot;4.2&quot;
groups = [&quot;default&quot;, &quot;dev&quot;]
content_hash = &quot;sha256:715ad39cb3ddf659e0afedfb18dcade3de83c16696c31ed976bbf46bb61aaa3a&quot;

[metadata.files]
&quot;black 23.3.0&quot; = [
    {url = &quot;https://files.pythonhosted.org/packages/06/1e/273d610249f0335afb1ddb03664a03223f4826e3d1a95170a0142cb19fb4/black-23.3.0-cp39-cp39-win_amd64.whl&quot;, hash = &quot;sha256:6b39abdfb402002b8a7d030ccc85cf5afff64ee90fa4c5aebc531e3ad0175ddb&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/12/4b/99c71d1cf1353edd5aff2700b8960f92e9b805c9dab72639b67dbb449d3a/black-23.3.0-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl&quot;, hash = &quot;sha256:562bd3a70495facf56814293149e51aa1be9931567474993c7942ff7d3533961&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/13/0a/ed8b66c299e896780e4528eed4018f5b084da3b9ba4ee48328550567d866/black-23.3.0-cp38-cp38-macosx_10_16_x86_64.whl&quot;, hash = &quot;sha256:064101748afa12ad2291c2b91c960be28b817c0c7eaa35bec09cc63aa56493c5&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/13/25/cfa06788d0a936f2445af88f13604b5bcd5c9d050db618c718e6ebe66f74/black-23.3.0-cp39-cp39-macosx_10_16_arm64.whl&quot;, hash = &quot;sha256:3238f2aacf827d18d26db07524e44741233ae09a584273aa059066d644ca7b30&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/21/14/d5a2bec5fb15f9118baab7123d344646fac0b1c6939d51c2b05259cd2d9c/black-23.3.0-cp38-cp38-macosx_10_16_universal2.whl&quot;, hash = &quot;sha256:714290490c18fb0126baa0fca0a54ee795f7502b44177e1ce7624ba1c00f2331&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/24/eb/2d2d2c27cb64cfd073896f62a952a802cd83cf943a692a2f278525b57ca9/black-23.3.0-cp37-cp37m-macosx_10_16_x86_64.whl&quot;, hash = &quot;sha256:1d06691f1eb8de91cd1b322f21e3bfc9efe0c7ca1f0e1eb1db44ea367dff656b&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/27/70/07aab2623cfd3789786f17e051487a41d5657258c7b1ef8f780512ffea9c/black-23.3.0-cp310-cp310-macosx_10_16_universal2.whl&quot;, hash = &quot;sha256:67de8d0c209eb5b330cce2469503de11bca4085880d62f1628bd9972cc3366b9&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/29/b1/b584fc863c155653963039664a592b3327b002405043b7e761b9b0212337/black-23.3.0-cp310-cp310-macosx_10_16_x86_64.whl&quot;, hash = &quot;sha256:7c3eb7cea23904399866c55826b31c1f55bbcd3890ce22ff70466b907b6775c2&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/3c/d7/85f3d79f9e543402de2244c4d117793f262149e404ea0168841613c33e07/black-23.3.0-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl&quot;, hash = &quot;sha256:3a150542a204124ed00683f0db1f5cf1c2aaaa9cc3495b7a3b5976fb136090ab&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/3f/0d/81dd4194ce7057c199d4f28e4c2a885082d9d929e7a55c514b23784f7787/black-23.3.0-cp311-cp311-win_amd64.whl&quot;, hash = &quot;sha256:11c410f71b876f961d1de77b9699ad19f939094c3a677323f43d7a29855fe326&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/49/36/15d2122f90ff1cd70f06892ebda777b650218cf84b56b5916a993dc1359a/black-23.3.0-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl&quot;, hash = &quot;sha256:50cb33cac881766a5cd9913e10ff75b1e8eb71babf4c7104f2e9c52da1fb7de2&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/49/d7/f3b7da6c772800f5375aeb050a3dcf682f0bbeb41d313c9c2820d0156e4e/black-23.3.0-cp39-cp39-macosx_10_16_x86_64.whl&quot;, hash = &quot;sha256:92c543f6854c28a3c7f39f4d9b7694f9a6eb9d3c5e2ece488c327b6e7ea9b266&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/69/49/7e1f0cf585b0d607aad3f971f95982cc4208fc77f92363d632d23021ee57/black-23.3.0-cp311-cp311-macosx_10_16_x86_64.whl&quot;, hash = &quot;sha256:a6f6886c9869d4daae2d1715ce34a19bbc4b95006d20ed785ca00fa03cba312d&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/6d/b4/0f13ab7f5e364795ff82b76b0f9a4c9c50afda6f1e2feeb8b03fdd7ec57d/black-23.3.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl&quot;, hash = &quot;sha256:32daa9783106c28815d05b724238e30718f34155653d4d6e125dc7daec8e260c&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/ad/e7/4642b7f462381799393fbad894ba4b32db00870a797f0616c197b07129a9/black-23.3.0-py3-none-any.whl&quot;, hash = &quot;sha256:ec751418022185b0c1bb7d7736e6933d40bbb14c14a0abcf9123d1b159f98dd4&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/c0/53/42e312c17cfda5c8fc4b6b396a508218807a3fcbb963b318e49d3ddd11d5/black-23.3.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl&quot;, hash = &quot;sha256:6f3c333ea1dd6771b2d3777482429864f8e258899f6ff05826c3a4fcc5ce3f70&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/ca/44/eb41edd3f558a6139f09eee052dead4a7a464e563b822ddf236f5a8ee286/black-23.3.0-cp37-cp37m-win_amd64.whl&quot;, hash = &quot;sha256:e114420bf26b90d4b9daa597351337762b63039752bdf72bf361364c1aa05925&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/ce/f4/2b0c6ac9e1f8584296747f66dd511898b4ebd51d6510dba118279bff53b6/black-23.3.0-cp38-cp38-macosx_10_16_arm64.whl&quot;, hash = &quot;sha256:48f9d345675bb7fbc3dd85821b12487e1b9a75242028adad0333ce36ed2a6d27&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/d1/6e/5810b6992ed70403124c67e8b3f62858a32b35405177553f1a78ed6b6e31/black-23.3.0-cp38-cp38-win_amd64.whl&quot;, hash = &quot;sha256:e198cf27888ad6f4ff331ca1c48ffc038848ea9f031a3b40ba36aced7e22f2c8&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/d6/36/66370f5017b100225ec4950a60caeef60201a10080da57ddb24124453fba/black-23.3.0.tar.gz&quot;, hash = &quot;sha256:1c7b8d606e728a41ea1ccbd7264677e494e87cf630e399262ced92d4a8dac940&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/d7/6f/d3832960a3b646b333b7f0d80d336a3c123012e9d9d5dba4a622b2b6181d/black-23.3.0-cp311-cp311-macosx_10_16_arm64.whl&quot;, hash = &quot;sha256:a8a968125d0a6a404842fa1bf0b349a568634f856aa08ffaff40ae0dfa52e7c6&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/db/f4/7908f71cc71da08df1317a3619f002cbf91927fb5d3ffc7723905a2113f7/black-23.3.0-cp310-cp310-macosx_10_16_arm64.whl&quot;, hash = &quot;sha256:0945e13506be58bf7db93ee5853243eb368ace1c08a24c65ce108986eac65915&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/de/b4/76f152c5eb0be5471c22cd18380d31d188930377a1a57969073b89d6615d/black-23.3.0-cp310-cp310-win_amd64.whl&quot;, hash = &quot;sha256:35d1381d7a22cc5b2be2f72c7dfdae4072a3336060635718cc7e1ede24221d6c&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/eb/a5/17b40bfd9b607b69fa726b0b3a473d14b093dcd5191ea1a1dd664eccfee3/black-23.3.0-cp311-cp311-macosx_10_16_universal2.whl&quot;, hash = &quot;sha256:c7ab5790333c448903c4b721b59c0d80b11fe5e9803d8703e84dcb8da56fec1b&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/fd/5b/fc2d7922c1a6bb49458d424b5be71d251f2d0dc97be9534e35d171bdc653/black-23.3.0-cp39-cp39-macosx_10_16_universal2.whl&quot;, hash = &quot;sha256:f0bd2f4a58d6666500542b26354978218a9babcdc972722f4bf90779524515f3&quot;},
]
&quot;click 8.1.3&quot; = [
    {url = &quot;https://files.pythonhosted.org/packages/59/87/84326af34517fca8c58418d148f2403df25303e02736832403587318e9e8/click-8.1.3.tar.gz&quot;, hash = &quot;sha256:7682dc8afb30297001674575ea00d1814d808d6a36af415a82bd481d37ba7b8e&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/c2/f1/df59e28c642d583f7dacffb1e0965d0e00b218e0186d7858ac5233dce840/click-8.1.3-py3-none-any.whl&quot;, hash = &quot;sha256:bb4d8133cb15a609f44e8213d9b391b0809795062913b383c62be0ee95b1db48&quot;},
]
&quot;colorama 0.4.6&quot; = [
    {url = &quot;https://files.pythonhosted.org/packages/d1/d6/3965ed04c63042e047cb6a3e6ed1a63a35087b6a609aa3a15ed8ac56c221/colorama-0.4.6-py2.py3-none-any.whl&quot;, hash = &quot;sha256:4f1d9991f5acc0ca119f9d443620b77f9d6b33703e51011c16baf57afb285fc6&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/d8/53/6f443c9a4a8358a93a6792e2acffb9d9d5cb0a5cfd8802644b7b1c9a02e4/colorama-0.4.6.tar.gz&quot;, hash = &quot;sha256:08695f5cb7ed6e0531a20572697297273c47b8cae5a63ffc6d6ed5c201be6e44&quot;},
]
&quot;cowsay 5.0&quot; = [
    {url = &quot;https://files.pythonhosted.org/packages/6b/b8/9f497fd045d74fe21d91cbe8debae0b451229989e35b539d218547d79fc6/cowsay-5.0.tar.gz&quot;, hash = &quot;sha256:c00e02444f5bc7332826686bd44d963caabbaba9a804a63153822edce62bbbf3&quot;},
]
&quot;mypy-extensions 1.0.0&quot; = [
    {url = &quot;https://files.pythonhosted.org/packages/2a/e2/5d3f6ada4297caebe1a2add3b126fe800c96f56dbe5d1988a2cbe0b267aa/mypy_extensions-1.0.0-py3-none-any.whl&quot;, hash = &quot;sha256:4392f6c0eb8a5668a69e23d168ffa70f0be9ccfd32b5cc2d26a34ae5b844552d&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/98/a4/1ab47638b92648243faf97a5aeb6ea83059cc3624972ab6b8d2316078d3f/mypy_extensions-1.0.0.tar.gz&quot;, hash = &quot;sha256:75dbf8955dc00442a438fc4d0666508a9a97b6bd41aa2f0ffe9d2f2725af0782&quot;},
]
&quot;packaging 23.1&quot; = [
    {url = &quot;https://files.pythonhosted.org/packages/ab/c3/57f0601a2d4fe15de7a553c00adbc901425661bf048f2a22dfc500caf121/packaging-23.1-py3-none-any.whl&quot;, hash = &quot;sha256:994793af429502c4ea2ebf6bf664629d07c1a9fe974af92966e4b8d2df7edc61&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/b9/6c/7c6658d258d7971c5eb0d9b69fa9265879ec9a9158031206d47800ae2213/packaging-23.1.tar.gz&quot;, hash = &quot;sha256:a392980d2b6cffa644431898be54b0045151319d1e7ec34f0cfed48767dd334f&quot;},
]
&quot;pathspec 0.11.1&quot; = [
    {url = &quot;https://files.pythonhosted.org/packages/95/60/d93628975242cc515ab2b8f5b2fc831d8be2eff32f5a1be4776d49305d13/pathspec-0.11.1.tar.gz&quot;, hash = &quot;sha256:2798de800fa92780e33acca925945e9a19a133b715067cf165b8866c15a31687&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/be/c8/551a803a6ebb174ec1c124e68b449b98a0961f0b737def601e3c1fbb4cfd/pathspec-0.11.1-py3-none-any.whl&quot;, hash = &quot;sha256:d8af70af76652554bd134c22b3e8a1cc46ed7d91edcdd721ef1a0c51a84a5293&quot;},
]
&quot;platformdirs 3.4.0&quot; = [
    {url = &quot;https://files.pythonhosted.org/packages/5e/ac/26d3d2a99b5fc84852229fc8470ae612595900f7f52c78468fd3f3a15a27/platformdirs-3.4.0.tar.gz&quot;, hash = &quot;sha256:a5e1536e5ea4b1c238a1364da17ff2993d5bd28e15600c2c8224008aff6bbcad&quot;},
    {url = &quot;https://files.pythonhosted.org/packages/6c/fe/f6001fac1337528c14b353298d38748ee2387db0c262587ff4e7c68b5769/platformdirs-3.4.0-py3-none-any.whl&quot;, hash = &quot;sha256:01437886022decaf285d8972f9526397bfae2ac55480ed372ed6d9eca048870a&quot;},
]
</pre></div>
</div>
</div>
</div>
<p>Many new packages now exist in the lockfile, not just <code class="docutils literal notranslate"><span class="pre">cowsay</span></code> and <code class="docutils literal notranslate"><span class="pre">black</span></code>.  This is because (unlike <code class="docutils literal notranslate"><span class="pre">cowsay</span></code>), <code class="docutils literal notranslate"><span class="pre">black</span></code> itself has dependencies that we needed to install to get it to work.  This lock file records exactly the versions of those sub-dependencies that we’ve now installed into our project virtual environment.</p>
<p>When we run <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">install</span></code>, if the lock file exists (and <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> hasn’t been changed since the lockfile was last updated), PDM will install precisely the packages listed in the lockfile, so we’ll always be working in the same virtual environment.  This is useful for developing and testing the code, so you should always include the lockfile in your project version control.</p>
<p>However, we don’t want to impose these restrictions on users of our library, or our project would rapidly become impossible to install due to other packages requiring different versions of the packages in the lockfile.  The only thing that we care about is that users have the right versions of the dependencies we directly use, which are listed in the <code class="docutils literal notranslate"><span class="pre">project.dependencies</span></code> array in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>.  This is why <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> does not care about the existence of the lockfile.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See the <a class="reference external" href="https://pdm.fming.dev/latest/usage/project/#working-with-version-control">PDM docs on version control</a> for more on best practices for version-controlling a PDM project.</p>
</div>
</section>
<section id="using-black">
<h3>Using black<a class="headerlink" href="#using-black" title="Permalink to this headline">#</a></h3>
<p>We can now run <code class="docutils literal notranslate"><span class="pre">black</span></code> within our environment.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p>Let’s re-write <a class="reference external" href="https://github.com/edsq/eeskew-pwg-test-000/tree/2899bbe9d807fb8a4e3e1c2088fe84313c6d3842/src/eeskew_pwg_test_000/sarcasm.py"><code class="docutils literal notranslate"><span class="pre">src/eeskew_pwg_test_000/sarcasm.py</span></code></a> with deliberately poor formatting:</p>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># src/eeskew_pwg_test_000/sarcasm.py</span>
<span class="kn">import</span> <span class="nn">cowsay</span>
<span class="k">def</span> <span class="nf">sarcasm</span><span class="p">(</span>
            <span class="n">s</span>
          <span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert string `s` to sArCaSm TeXt.&quot;&quot;&quot;</span>
    <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">c</span> <span class="ow">in</span> \
        <span class="nb">enumerate</span><span class="p">(</span> <span class="n">s</span> <span class="p">):</span>

        <span class="k">if</span> <span class="n">i</span><span class="o">%</span> <span class="mi">2</span> <span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="n">out</span> <span class="o">+=</span><span class="n">c</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">else</span><span class="p">:</span>



            <span class="n">out</span><span class="o">+=</span> <span class="n">c</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">out</span>

<span class="k">def</span> <span class="nf">sarcastic_cowsay</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cowsay `s`, sArCaStIcAlLy.&quot;&quot;&quot;</span>
    <span class="n">sarcastic_s</span> <span class="o">=</span> <span class="n">sarcasm</span><span class="p">(</span><span class="n">s</span><span class="p">);</span> <span class="n">cowsay</span><span class="o">.</span><span class="n">cow</span><span class="p">(</span><span class="n">sarcastic_s</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This is bad formatting!  Rather than fix it manually, we can run <code class="docutils literal notranslate"><span class="pre">black</span></code> on our code, which will auto-impose a reasonable style.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>run<span class="w"> </span>black<span class="w"> </span>src/
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">reformatted /Users/Ed/python/eds-notes/repos/_tmp_pwg_presentation_02-08-2023_part1/eeskew-pwg-test-000/src/eeskew_pwg_test_000/sarcasm.py</span>

<span class=" -Color -Color-Bold">All done! ✨ 🍰 ✨</span>
<span class=" -Color -Color-Bold -Color-Bold-Blue">1 file </span><span class=" -Color -Color-Bold">reformatted</span>, <span class=" -Color -Color-Blue">1 file </span>left unchanged.
</pre></div>
</div>
</div>
</div>
</section>
<section id="what-did-black-do">
<h3>What did <code class="docutils literal notranslate"><span class="pre">black</span></code> do?<a class="headerlink" href="#what-did-black-do" title="Permalink to this headline">#</a></h3>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p><code class="docutils literal notranslate"><span class="pre">black</span></code> has automatically re-formatted <a class="reference external" href="https://github.com/edsq/eeskew-pwg-test-000/tree/8e4d1b755cd4b7a485b2c8e3341107e98fe9b298/src/eeskew_pwg_test_000/sarcasm.py"><code class="docutils literal notranslate"><span class="pre">src/eeskew_pwg_test_000/sarcasm.py</span></code></a>, fixing the poor formatting we introduced earlier:</p>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># src/eeskew_pwg_test_000/sarcasm.py</span>
<span class="kn">import</span> <span class="nn">cowsay</span>


<span class="k">def</span> <span class="nf">sarcasm</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert string `s` to sArCaSm TeXt.&quot;&quot;&quot;</span>
    <span class="n">out</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">+=</span> <span class="n">c</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">+=</span> <span class="n">c</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">out</span>


<span class="k">def</span> <span class="nf">sarcastic_cowsay</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cowsay `s`, sArCaStIcAlLy.&quot;&quot;&quot;</span>
    <span class="n">sarcastic_s</span> <span class="o">=</span> <span class="n">sarcasm</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="n">cowsay</span><span class="o">.</span><span class="n">cow</span><span class="p">(</span><span class="n">sarcastic_s</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See the <a class="reference external" href="https://black.readthedocs.io/en/stable/">black documentation</a> for more information.</p>
</div>
</section>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">#</a></h2>
<p>That’s all for Part 1!  The examples here should be enough to get you started using PDM to manage your own python projects.  For more advanced usage, check out the PDM documentation on:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://pdm.fming.dev/latest/usage/project/">General project management</a></p></li>
<li><p><a class="reference external" href="https://pdm.fming.dev/latest/usage/venv/">Working with virtualenv</a></p></li>
<li><p><a class="reference external" href="https://pdm.fming.dev/latest/usage/dependency/">Managing dependencies</a></p></li>
</ul>
<p>In <a class="reference internal" href="part2.html"><span class="doc std std-doc">Part 2</span></a>, we’ll cover how to publish a PDM project on PyPI, so that it can be installed with a simple <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code>.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "bash"
        },
        kernelOptions: {
            name: "bash",
            path: "./python_notes/pwg_presentation"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'bash'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Project Management and Publishing with PDM</p>
      </div>
    </a>
    <a class="right-next"
       href="part2.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Publishing on (Test)PyPI</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#requirements">Requirements</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#set-the-python-version-and-initialize-the-project">Set the python version and initialize the project</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pdm-init-options"><code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">init</span></code> options</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-pdm-project">The PDM project</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-pyproject-toml-file">The <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-code">Adding code</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-a-module">Add a module</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install-the-project">Install the project</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-pdm-lock-file">The <code class="docutils literal notranslate"><span class="pre">pdm.lock</span></code> file</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#add-a-dependency">Add a dependency</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-did-pdm-add-do">What did <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">add</span></code> do?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-more-code">Adding more code</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#add-a-development-dependency">Add a development dependency</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-did-pdm-add-d-do">What did <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">add</span> <span class="pre">-d</span></code> do?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-black">Using black</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-did-black-do">What did <code class="docutils literal notranslate"><span class="pre">black</span></code> do?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner">
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Edward Eskew
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div></div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>