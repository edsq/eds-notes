

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Publishing on (Test)PyPI &#8212; Ed&#39;s Notes: Physics, Math, and Python</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'python_notes/pwg_presentation/part2';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Project Management with PDM" href="part1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo_light.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../_static/logo_dark.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Python Notes</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="intro.html">Project Management and Publishing with PDM</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="part1.html">Project Management with PDM</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Publishing on (Test)PyPI</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/edsq/eds-notes" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/python_notes/pwg_presentation/part2.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Publishing on (Test)PyPI</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#package-version">Package version</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#packaging-the-project">Packaging the project</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-happened">What happened?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#publishing-the-project">Publishing the project</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-pypi-credentials">Setting up PyPI credentials</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-a-test-publish-pdm-script">Setting up a test-publish PDM script</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#other-project-metadata">Other project metadata</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-an-entry-point-to-the-package">Add an entry point to the package</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#updating-readme">Updating README</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#project-urls">Project URLs</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#further-reading">Further reading</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-project-management-tools">Other project management tools</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="publishing-on-test-pypi">
<h1>Publishing on (Test)PyPI<a class="headerlink" href="#publishing-on-test-pypi" title="Permalink to this headline">#</a></h1>
<p>Part 2 of notes from a talk given to the WSU Python Working Group on February 8, 2023.</p>
<p>Here, we’ll cover the basics of publishing a project on PyPI or TestPyPI using PDM,
including managing relevant project metadata.</p>
<p>This tutorial is primarily aimed at macOS and Linux users, although the commands for Windows should mostly translate.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A companion repository with the example project created in these notes is available <a class="reference external" href="https://github.com/edsq/eeskew-pwg-test-000">here</a>.</p>
</div>
<section id="package-version">
<h2>Package version<a class="headerlink" href="#package-version" title="Permalink to this headline">#</a></h2>
<p>Right now, the package version (<code class="docutils literal notranslate"><span class="pre">&quot;0.1.0&quot;</span></code>) is stored in the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file (in the <code class="docutils literal notranslate"><span class="pre">project.version</span></code> keyword).  The best practice is to place this in a <code class="docutils literal notranslate"><span class="pre">__version__.py</span></code> file, and have that be the single source of truth for our package version.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p>Create the file <a class="reference external" href="https://github.com/edsq/eeskew-pwg-test-000/tree/b3bdadfd0d26120e126ecbdb918c111f9853050d/src/eeskew_pwg_test_000/__version__.py"><code class="docutils literal notranslate"><span class="pre">src/eeskew_pwg_test_000/__version__.py</span></code></a>, and add the <code class="docutils literal notranslate"><span class="pre">__version__</span></code> variable to it. The new file should look like:</p>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># src/eeskew_pwg_test_000/__version__.py</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;0.1.0&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p>Now modify the <a class="reference external" href="https://github.com/edsq/eeskew-pwg-test-000/tree/b3bdadfd0d26120e126ecbdb918c111f9853050d/pyproject.toml"><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code></a> file so that the version is <a class="reference external" href="https://packaging.python.org/en/latest/specifications/declaring-project-metadata/#dynamic">dynamic metadata</a>:</p>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># pyproject.toml</span>
<span class="k">[tool.pdm]</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;file&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;src/eeskew_pwg_test_000/__version__.py&quot;</span><span class="w"> </span><span class="p">}</span>

<span class="k">[tool.pdm.dev-dependencies]</span>
<span class="n">dev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s">&quot;black&gt;=23.1.0&quot;</span><span class="p">,</span>

<span class="p">...</span>

<span class="p">]</span>

<span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;eeskew-pwg-test-000&quot;</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;A test project for presentation to the WSU Python Working Group.&quot;</span>
<span class="n">authors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>

<span class="p">...</span>

<span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&gt;=3.11&quot;</span>
<span class="n">readme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;README.md&quot;</span>
<span class="n">license</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;MIT&quot;</span><span class="p">}</span>
<span class="n">dynamic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;version&quot;</span><span class="p">]</span>

<span class="k">[build-system]</span>
<span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;pdm-pep517&gt;=1.0&quot;</span><span class="p">]</span>

<span class="p">...</span>
</pre></div>
</div>
</div>
</div>
<p>Click below to show diff:</p>
<div class="cell tag_remove-input tag_hide-output docutils container">
<details class="hide above-output">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell outputs</span>
<span class="expanded">Hide code cell outputs</span>
</summary>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold -Color-Bold-Cyan">────────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold -Color-Bold-Cyan">modified: pyproject.toml</span>
<span class=" -Color -Color-Bold -Color-Bold-Cyan">────────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold -Color-Bold-C13">@ pyproject.toml:3 @</span>
 [tool.pdm]
<span class=" -Color -Color-Green">+version = { source = &quot;file&quot;, path = &quot;src/eeskew_pwg_test_000/__version__.py&quot; }</span>
<span class=" -Color -Color-Green">+</span>
 [tool.pdm.dev-dependencies]
 dev = [
     &quot;black&gt;=23.1.0&quot;,
<span class=" -Color -Color-Bold -Color-Bold-C13">@ pyproject.toml:11 @</span><span class=" -Color -Color-Bold -Color-Bold-C146"> dev = [</span>
 
 [project]
 name = &quot;eeskew-pwg-test-000&quot;
<span class=" -Color -Color-Red">-version = &quot;0.1.0&quot;</span>
 description = &quot;A test project for presentation to the WSU Python Working Group.&quot;
 authors = [
     {name = &quot;Edward Eskew&quot;, email = &quot;edward.eskew@wsu.edu&quot;},
<span class=" -Color -Color-Bold -Color-Bold-C13">@ pyproject.toml:21 @</span><span class=" -Color -Color-Bold -Color-Bold-C146"> dependencies = [</span>
 requires-python = &quot;&gt;=3.11&quot;
 readme = &quot;README.md&quot;
 license = {text = &quot;MIT&quot;}
<span class=" -Color -Color-Green">+dynamic = [&quot;version&quot;]</span>
 
 [build-system]
 requires = [&quot;pdm-pep517&gt;=1.0&quot;]
</pre></div>
</div>
</div>
</details>
</div>
<p>Note the new <code class="docutils literal notranslate"><span class="pre">project.dynamic</span></code> array, the new <code class="docutils literal notranslate"><span class="pre">tool.pdm.version</span></code> table, and that the <code class="docutils literal notranslate"><span class="pre">project.version</span></code> key is gone.</p>
<p>We can check the version like so:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>show<span class="w"> </span>--version<span class="w"> </span>eeskew-pwg-test-000
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.1.0
</pre></div>
</div>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p>We should also add the <code class="docutils literal notranslate"><span class="pre">__version__</span></code> variable to <a class="reference external" href="https://github.com/edsq/eeskew-pwg-test-000/tree/64240ff21f2a5ea1713fc4dbf0f6a1c903575124/src/eeskew_pwg_test_000/__init__.py"><code class="docutils literal notranslate"><span class="pre">src/eeskew_pwg_test_000/__init__.py</span></code></a>:</p>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># src/eeskew_pwg_test_000/__init__.py</span>
<span class="kn">from</span> <span class="nn">eeskew_pwg_test_000.__version__</span> <span class="kn">import</span> <span class="n">__version__</span>
</pre></div>
</div>
</div>
</div>
<p>This allows us to check the version from python in the conventional way:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;import eeskew_pwg_test_000; print(eeskew_pwg_test_000.__version__)&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.1.0
</pre></div>
</div>
</div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See the <a class="reference external" href="https://pdm.fming.dev/latest/pyproject/build/#dynamic-versioning">PDM docs on dynamic versioning</a> for more information.</p>
</div>
</section>
<section id="packaging-the-project">
<h2>Packaging the project<a class="headerlink" href="#packaging-the-project" title="Permalink to this headline">#</a></h2>
<p>Let’s review the project as it exists so far:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tree
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>.
├── README.md
├── pdm.lock
├── pyproject.toml
└── src
    └── eeskew_pwg_test_000
        ├── __init__.py
        ├── __pycache__
        │   ├── __init__.cpython-311.pyc
        │   ├── __version__.cpython-311.pyc
        │   └── utils.cpython-311.pyc
        ├── __version__.py
        └── utils.py

3 directories, 9 files
</pre></div>
</div>
</div>
</div>
<p>To create an <a class="reference external" href="https://packaging.python.org/en/latest/specifications/source-distribution-format/">sdist</a> and <a class="reference external" href="https://packaging.python.org/en/latest/specifications/binary-distribution-format/">wheel</a>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>build
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Building sdist...
Built sdist at 
/Users/Ed/python/eds-notes/repos/eeskew-pwg-test-000/dist/eeskew-pwg-test-000-0.
1.0.tar.gz
Building wheel...
Built wheel at 
/Users/Ed/python/eds-notes/repos/eeskew-pwg-test-000/dist/eeskew_pwg_test_000-0.
1.0-py3-none-any.whl
</pre></div>
</div>
</div>
</div>
<section id="what-happened">
<h3>What happened?<a class="headerlink" href="#what-happened" title="Permalink to this headline">#</a></h3>
<p>We’ve created a new directory named <code class="docutils literal notranslate"><span class="pre">dist</span></code>, where these two distribution formats have been placed.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tree
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>.
├── README.md
├── build
├── dist
│   ├── eeskew-pwg-test-000-0.1.0.tar.gz
│   └── eeskew_pwg_test_000-0.1.0-py3-none-any.whl
├── pdm.lock
├── pyproject.toml
└── src
    └── eeskew_pwg_test_000
        ├── __init__.py
        ├── __pycache__
        │   ├── __init__.cpython-311.pyc
        │   ├── __version__.cpython-311.pyc
        │   └── utils.cpython-311.pyc
        ├── __version__.py
        └── utils.py

5 directories, 11 files
</pre></div>
</div>
</div>
</div>
<p>We could install this project into a different python environment with <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">dist/eeskew-pwg-test-000-0.1.0.tar.gz</span></code> or <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">dist/eeskew_pwg_test_000-0.1.0-py3-none-any.whl</span></code> (the latter is faster).</p>
</section>
</section>
<section id="publishing-the-project">
<h2>Publishing the project<a class="headerlink" href="#publishing-the-project" title="Permalink to this headline">#</a></h2>
<p>Now we’ll publish the project on (Test)PyPI.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To publish on the actual index (PyPI, not TestPyPI), simply replace <code class="docutils literal notranslate"><span class="pre">testpypi</span></code> with <code class="docutils literal notranslate"><span class="pre">pypi</span></code> in the instructions that follow.  Try not to pollute PyPI with throwaway projects!</p>
</div>
<section id="setting-up-pypi-credentials">
<h3>Setting up PyPI credentials<a class="headerlink" href="#setting-up-pypi-credentials" title="Permalink to this headline">#</a></h3>
<ol class="arabic simple" start="0">
<li><p>First, make an account on <a class="reference external" href="https://test.pypi.org">TestPyPI</a>.</p></li>
<li><p>Navigate to your account settings, scroll down to “API tokens”, and click “Add API token”</p></li>
<li><p>Give the token a descriptive name, set the scope to “Entire account (all projects)”, and click “Add token”.</p></li>
<li><p>Copy the token that appears - heeding the warning that it will appear only once!</p></li>
<li><p>Now we’ll configure PDM with these credentials (replacing <code class="docutils literal notranslate"><span class="pre">&lt;PASTE_YOUR_TOKEN_HERE&gt;</span></code> with the token you’ve just copied):</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>config<span class="w"> </span>repository.testpypi.username<span class="w"> </span><span class="s2">&quot;__token__&quot;</span>
pdm<span class="w"> </span>config<span class="w"> </span>repository.testpypi.password<span class="w"> </span><span class="s2">&quot;&lt;PASTE_YOUR_TOKEN_HERE&gt;&quot;</span>
</pre></div>
</div>
</section>
<section id="setting-up-a-test-publish-pdm-script">
<h3>Setting up a test-publish PDM script<a class="headerlink" href="#setting-up-a-test-publish-pdm-script" title="Permalink to this headline">#</a></h3>
<p>To publish on PyPI, we could now simply run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>publish<span class="w"> </span>-r<span class="w"> </span>testpypi
</pre></div>
</div>
<p>Note that you do not need to run <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">build</span></code> first - PDM will build the distribution as part of <code class="docutils literal notranslate"><span class="pre">publish</span></code> anyway.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See the <a class="reference external" href="https://pdm.fming.dev/latest/usage/project/#publish-the-project-to-pypi">PDM docs on publishing to PyPI for more information</a>.</p>
</div>
<p>However, TestPyPI won’t let you overwrite an existing version of your package, so we have to bump our version every time we want to do this.  Let’s set up a PDM script to automate that.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>If you are publishing on PyPI (<em>not</em> TestPyPI), you probably don’t want to use this script.  Publishing will be as simple as running <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">bump</span> <span class="pre">{version}</span></code> to increment your package version number (for example, <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">bump</span> <span class="pre">patch</span></code>), and then publishing with <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">publish</span></code> (equivalent to <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">publish</span> <span class="pre">-r</span> <span class="pre">pypyi</span></code>).</p>
</div>
<p>First, ensure you have the <a class="reference external" href="https://github.com/carstencodes/pdm-bump">pdm-bump</a> plugin installed.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p>We add a new PDM script in the <code class="docutils literal notranslate"><span class="pre">tool.pdm.scripts</span></code> table of <a class="reference external" href="https://github.com/edsq/eeskew-pwg-test-000/tree/d28bac9fd3674bd5b37d59afc5b65be838e42fd4/pyproject.toml"><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code></a>:</p>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># pyproject.toml</span>
<span class="k">[tool.pdm]</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;file&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;src/eeskew_pwg_test_000/__version__.py&quot;</span><span class="w"> </span><span class="p">}</span>

<span class="k">[tool.pdm.scripts]</span>
<span class="n">test-publish</span><span class="p">.</span><span class="n">shell</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;&#39;&#39;\</span>
<span class="s">VERSION=$(pdm show --version eeskew-pwg-test-000)</span>
<span class="s">pdm bump patch &gt; /dev/null</span>
<span class="s">BUMPED_VERSION=$(pdm show --version eeskew-pwg-test-000)</span>
<span class="s">DEV_VERSION=$BUMPED_VERSION.dev$(date +%s)</span>
<span class="s">echo &quot;__version__ = \&quot;$DEV_VERSION\&quot;&quot; &gt; src/eeskew_pwg_test_000/__version__.py</span>
<span class="s">pdm publish -r testpypi</span>
<span class="s">echo &quot;__version__ = \&quot;$VERSION\&quot;&quot; &gt; src/eeskew_pwg_test_000/__version__.py</span>
<span class="s">&#39;&#39;&#39;</span>

<span class="k">[tool.pdm.dev-dependencies]</span>
<span class="n">dev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s">&quot;black&gt;=23.1.0&quot;</span><span class="p">,</span>

<span class="p">...</span>
</pre></div>
</div>
</div>
</div>
<p>Click below to show diff:</p>
<div class="cell tag_remove-input tag_hide-output docutils container">
<details class="hide above-output">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell outputs</span>
<span class="expanded">Hide code cell outputs</span>
</summary>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold -Color-Bold-Cyan">────────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold -Color-Bold-Cyan">modified: pyproject.toml</span>
<span class=" -Color -Color-Bold -Color-Bold-Cyan">────────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold -Color-Bold-C13">@ pyproject.toml:4 @</span>
 [tool.pdm]
 version = { source = &quot;file&quot;, path = &quot;src/eeskew_pwg_test_000/__version__.py&quot; }
 
<span class=" -Color -Color-Green">+[tool.pdm.scripts]</span>
<span class=" -Color -Color-Green">+test-publish.shell = &#39;&#39;&#39;\</span>
<span class=" -Color -Color-Green">+VERSION=$(pdm show --version eeskew-pwg-test-000)</span>
<span class=" -Color -Color-Green">+pdm bump patch &gt; /dev/null</span>
<span class=" -Color -Color-Green">+BUMPED_VERSION=$(pdm show --version eeskew-pwg-test-000)</span>
<span class=" -Color -Color-Green">+DEV_VERSION=$BUMPED_VERSION.dev$(date +%s)</span>
<span class=" -Color -Color-Green">+echo &quot;__version__ = \&quot;$DEV_VERSION\&quot;&quot; &gt; src/eeskew_pwg_test_000/__version__.py</span>
<span class=" -Color -Color-Green">+pdm publish -r testpypi</span>
<span class=" -Color -Color-Green">+echo &quot;__version__ = \&quot;$VERSION\&quot;&quot; &gt; src/eeskew_pwg_test_000/__version__.py</span>
<span class=" -Color -Color-Green">+&#39;&#39;&#39;</span>
<span class=" -Color -Color-Green">+</span>
 [tool.pdm.dev-dependencies]
 dev = [
     &quot;black&gt;=23.1.0&quot;,
</pre></div>
</div>
</div>
</details>
</div>
<p>When we run <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">run</span> <span class="pre">test-publish</span></code>, this script:</p>
<ol class="arabic simple">
<li><p>Gets the current version with <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">show</span> <span class="pre">--version</span></code></p></li>
<li><p>Changes the package version to a patch bump of that version with <code class="docutils literal notranslate"><span class="pre">.dev{date</span> <span class="pre">in</span> <span class="pre">seconds}</span></code> appended.  This is a <a class="reference external" href="https://peps.python.org/pep-0440/#developmental-releases">developmental release</a> format.</p></li>
<li><p>Publishes the package on TestPyPI</p></li>
<li><p>Returns the package version to its original value</p></li>
</ol>
<p>Let’s run it!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>run<span class="w"> </span>test-publish
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Building sdist...
Built sdist at 
/Users/Ed/python/eds-notes/repos/eeskew-pwg-test-000/dist/eeskew-pwg-test-000-0.
1.1.dev1678597709.tar.gz
Building wheel...
Built wheel at 
/Users/Ed/python/eds-notes/repos/eeskew-pwg-test-000/dist/eeskew_pwg_test_000-0.
1.1.dev1678597709-py3-none-any.whl
Uploading <span class=" -Color -Color-Green">eeskew_pwg_test_000-0.1.1.dev1678597709-py3-none-any.whl</span>
Uploading <span class=" -Color -Color-Green">eeskew-pwg-test-000-0.1.1.dev1678597709.tar.gz</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.7/4.7 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">4.0/4.0 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
?25h
<span class=" -Color -Color-Green">View at:</span>
https://test.pypi.org/project/eeskew-pwg-test-000/0.1.1.dev1678597709/
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to test installing from TestPyPI, you can do so as follows:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
PDM</label><div class="sd-tab-content docutils">
<p>Make a new PDM project, add TestPyPI to the local project indices, then install:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdm</span> <span class="n">config</span> <span class="o">--</span><span class="n">local</span> <span class="n">pypi</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">url</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">test</span><span class="o">.</span><span class="n">pypi</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">simple</span><span class="o">/</span>
<span class="n">pdm</span> <span class="n">add</span> <span class="n">your</span><span class="o">-</span><span class="n">package</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-1">
venv or conda</label><div class="sd-tab-content docutils">
<p>Create a new <code class="docutils literal notranslate"><span class="pre">venv</span></code> or <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment, <em>don’t forget to activate it</em>, then run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">index</span><span class="o">-</span><span class="n">url</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">test</span><span class="o">.</span><span class="n">pypi</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">simple</span><span class="o">/</span> <span class="o">--</span><span class="n">extra</span><span class="o">-</span><span class="n">index</span><span class="o">-</span><span class="n">url</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">pypi</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">simple</span><span class="o">/</span> <span class="n">your</span><span class="o">-</span><span class="n">package</span>
</pre></div>
</div>
</div>
</div>
<p>Be sure not to <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> into your system or conda base environment!  First make a new virtual environment using PDM, venv, or conda, and test your install there.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See the <a class="reference external" href="https://pdm.fming.dev/latest/usage/scripts/">PDM docs on PDM scripts</a> for more information on writing PDM scripts.</p>
</div>
</section>
</section>
<section id="other-project-metadata">
<h2>Other project metadata<a class="headerlink" href="#other-project-metadata" title="Permalink to this headline">#</a></h2>
<p>There is quite a bit of project metadata we can specify in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> - here are some other examples.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See the <a class="reference external" href="https://packaging.python.org/en/latest/specifications/declaring-project-metadata/">PyPA specification</a> for a complete list of possible metadata keys.</p>
</div>
<section id="add-an-entry-point-to-the-package">
<h3>Add an entry point to the package<a class="headerlink" href="#add-an-entry-point-to-the-package" title="Permalink to this headline">#</a></h3>
<p>If we’re developing a command-line application, we want our users to be able to run the application with a single command, not something like <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">path_to_script/script.py</span></code>.  We can enable this by adding an <a class="reference external" href="https://packaging.python.org/en/latest/specifications/declaring-project-metadata/#entry-points">entry point</a> to <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p>First, add a new module and new function to <a class="reference external" href="https://github.com/edsq/eeskew-pwg-test-000/tree/94de6112a928f5f34fbc181752964a5f6f2d9776/src/eeskew_pwg_test_000/cli.py"><code class="docutils literal notranslate"><span class="pre">src/eeskew_pwg_test_000/cli.py</span></code></a>:</p>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># src/eeskew_pwg_test_000/cli.py</span>
<span class="kn">import</span> <span class="nn">argparse</span>

<span class="kn">from</span> <span class="nn">eeskew_pwg_test_000.utils</span> <span class="kn">import</span> <span class="n">sarcastic_cowsay</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cowsay something sarcastically from the command line.&quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;speech&quot;</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    
    <span class="n">s</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">speech</span>
    <span class="n">sarcastic_cowsay</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p>Now let’s add the script to <a class="reference external" href="https://github.com/edsq/eeskew-pwg-test-000/tree/bd0f6f0c5a7801e7572720c6456c46a5598bfc54/pyproject.toml"><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code></a>, in the <code class="docutils literal notranslate"><span class="pre">project.scripts</span></code> table:</p>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># pyproject.toml</span>
<span class="p">...</span>

<span class="n">license</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;MIT&quot;</span><span class="p">}</span>
<span class="n">dynamic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;version&quot;</span><span class="p">]</span>

<span class="k">[project.scripts]</span>
<span class="n">sarcasticow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;eeskew_pwg_test_000.cli:main&quot;</span>

<span class="k">[build-system]</span>
<span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;pdm-pep517&gt;=1.0&quot;</span><span class="p">]</span>
<span class="n">build-backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;pdm.pep517.api&quot;</span>
</pre></div>
</div>
</div>
</div>
<p>Click below to show diff:</p>
<div class="cell tag_remove-input tag_hide-output docutils container">
<details class="hide above-output">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell outputs</span>
<span class="expanded">Hide code cell outputs</span>
</summary>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold -Color-Bold-Cyan">────────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold -Color-Bold-Cyan">modified: pyproject.toml</span>
<span class=" -Color -Color-Bold -Color-Bold-Cyan">────────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold -Color-Bold-C13">@ pyproject.toml:34 @</span><span class=" -Color -Color-Bold -Color-Bold-C146"> readme = &quot;README.md&quot;</span>
 license = {text = &quot;MIT&quot;}
 dynamic = [&quot;version&quot;]
 
<span class=" -Color -Color-Green">+[project.scripts]</span>
<span class=" -Color -Color-Green">+sarcasticow = &quot;eeskew_pwg_test_000.cli:main&quot;</span>
<span class=" -Color -Color-Green">+</span>
 [build-system]
 requires = [&quot;pdm-pep517&gt;=1.0&quot;]
 build-backend = &quot;pdm.pep517.api&quot;
</pre></div>
</div>
</div>
</details>
</div>
<p>Note the new entry for <code class="docutils literal notranslate"><span class="pre">sarcasticow</span></code> in the <code class="docutils literal notranslate"><span class="pre">project.scripts</span></code> table.</p>
<p>To use the <code class="docutils literal notranslate"><span class="pre">sarcasticow</span></code> command, we need to re-install the project:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>install
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">⠋</span> Fetching hashes for resolved packages...
All packages are synced to date, nothing to do.
Installing the project as an editable package...
  <span class=" -Color -Color-Green">✔</span> Update <span class=" -Color -Color-Bold -Color-Bold-Green">eeskew-pwg-test-000</span> <span class=" -Color -Color-Yellow">0.1.0</span> -&gt; <span class=" -Color -Color-Yellow">0.1.0</span> successful

🎉 All complete!

?25h
</pre></div>
</div>
</div>
</div>
<p>Now we can run our command from within the environment:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>run<span class="w"> </span>sarcasticow<span class="w"> </span><span class="s2">&quot;I&#39;m a sarcastic cow&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  ___________________
| i&#39;m a sArCaStIc cOw |
  ===================
                   \
                    \
                      ^__^
                      (oo)\_______
                      (__)\       )\/\
                          ||----w |
                          ||     ||
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because we’re using <code class="docutils literal notranslate"><span class="pre">pdm</span></code> for environment management, we still need to use <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">run</span></code> to access the script installed into the virtual environment.  We could also first activate the environment with <code class="docutils literal notranslate"><span class="pre">eval</span> <span class="pre">$(pdm</span> <span class="pre">venv</span> <span class="pre">activate)</span></code>.</p>
<p>Unlike the <code class="docutils literal notranslate"><span class="pre">test-publish</span></code> PDM script we wrote earlier, if we activated the environment with <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">.venv/bin/activate</span></code>, we could simply use the <code class="docutils literal notranslate"><span class="pre">sarcasticow</span></code> command by itself, and users who install our package with <code class="docutils literal notranslate"><span class="pre">pip</span></code> into their own virtualenv or conda environment will also have access to <code class="docutils literal notranslate"><span class="pre">sarcasticow</span></code>.  Even better, users who install our package through <a class="reference external" href="https://pypa.github.io/pipx/"><code class="docutils literal notranslate"><span class="pre">pipx</span></code></a> will be able to use the <code class="docutils literal notranslate"><span class="pre">sarcasticow</span></code> command without activating a virtual environment.</p>
</div>
</section>
<section id="updating-readme">
<h3>Updating README<a class="headerlink" href="#updating-readme" title="Permalink to this headline">#</a></h3>
<p>Thus far, we’ve left our README as an empty file.  This is bad.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p>Let’s update <a class="reference external" href="https://github.com/edsq/eeskew-pwg-test-000/tree/60e53cc9f216a604ed2c2524825969bdb621c76e/README.md"><code class="docutils literal notranslate"><span class="pre">README.md</span></code></a> to show our utility’s usage:</p>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span># README.md
# eeskew-pwg-test-000

This is a companion repository to the presentation [Project Management and Publishing with PDM](https://edsq.github.io/eds-notes/python_notes/pwg_presentation/intro.html).

Command-line usage:

```
$ sarcasticow &quot;I&#39;m a sarcastic cow&quot;

  ___________________
| i&#39;m a sArCaStIc cOw |
  ===================
                   \
                    \
                      ^__^
                      (oo)\_______
                      (__)\       )\/\
                          ||----w |
                          ||     ||

```
</pre></div>
</div>
</div>
</div>
</section>
<section id="project-urls">
<h3>Project URLs<a class="headerlink" href="#project-urls" title="Permalink to this headline">#</a></h3>
<p>We can add relevant URLs in the <a class="reference external" href="https://packaging.python.org/en/latest/specifications/declaring-project-metadata/#urls"><code class="docutils literal notranslate"><span class="pre">urls</span></code> table</a>, which will appear in the sidebar on PyPI.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p>In the <code class="docutils literal notranslate"><span class="pre">project.urls</span></code> table of <a class="reference external" href="https://github.com/edsq/eeskew-pwg-test-000/tree/a9d58ccbed5868e5adbdf9adbbeb6861c2a5b57c/pyproject.toml"><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code></a>, we set <code class="docutils literal notranslate"><span class="pre">Documentation</span></code> to a link to our docs (this Jupyter Book), and <code class="docutils literal notranslate"><span class="pre">Repository</span></code> to the GitHub repo for this code.</p>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># pyproject.toml</span>
<span class="p">...</span>

<span class="n">license</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;MIT&quot;</span><span class="p">}</span>
<span class="n">dynamic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;version&quot;</span><span class="p">]</span>

<span class="k">[project.urls]</span>
<span class="n">Documentation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://edsq.github.io/eds-notes/python_notes/pwg_presentation/intro.html&quot;</span>
<span class="n">Repository</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://github.com/edsq/eeskew-pwg-test-000&quot;</span>

<span class="k">[project.scripts]</span>
<span class="n">sarcasticow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;eeskew_pwg_test_000.cli:main&quot;</span>


<span class="p">...</span>
</pre></div>
</div>
</div>
</div>
<p>Click below to show diff:</p>
<div class="cell tag_remove-input tag_hide-output docutils container">
<details class="hide above-output">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell outputs</span>
<span class="expanded">Hide code cell outputs</span>
</summary>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold -Color-Bold-Cyan">────────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold -Color-Bold-Cyan">modified: pyproject.toml</span>
<span class=" -Color -Color-Bold -Color-Bold-Cyan">────────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold -Color-Bold-C13">@ pyproject.toml:34 @</span><span class=" -Color -Color-Bold -Color-Bold-C146"> readme = &quot;README.md&quot;</span>
 license = {text = &quot;MIT&quot;}
 dynamic = [&quot;version&quot;]
 
<span class=" -Color -Color-Green">+[project.urls]</span>
<span class=" -Color -Color-Green">+Documentation = &quot;https://edsq.github.io/eds-notes/python_notes/pwg_presentation/intro.html&quot;</span>
<span class=" -Color -Color-Green">+Repository = &quot;https://github.com/edsq/eeskew-pwg-test-000&quot;</span>
<span class=" -Color -Color-Green">+</span>
 [project.scripts]
 sarcasticow = &quot;eeskew_pwg_test_000.cli:main&quot;
 
</pre></div>
</div>
</div>
</details>
</div>
<p>Finally, we publish again to TestPYPI:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>run<span class="w"> </span>test-publish
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Building sdist...
Built sdist at 
/Users/Ed/python/eds-notes/repos/eeskew-pwg-test-000/dist/eeskew-pwg-test-000-0.
1.1.dev1678597731.tar.gz
Building wheel...
Built wheel at 
/Users/Ed/python/eds-notes/repos/eeskew-pwg-test-000/dist/eeskew_pwg_test_000-0.
1.1.dev1678597731-py3-none-any.whl
Uploading <span class=" -Color -Color-Green">eeskew_pwg_test_000-0.1.1.dev1678597731-py3-none-any.whl</span>
Uploading <span class=" -Color -Color-Green">eeskew-pwg-test-000-0.1.1.dev1678597731.tar.gz</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.5/6.5 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
 <span class=" -Color -Color-Magenta">100%</span> <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">5.3/5.3 kB</span> • <span class=" -Color -Color-Yellow">00:00</span> • <span class=" -Color -Color-Red">?</span>
?25h
<span class=" -Color -Color-Green">View at:</span>
https://test.pypi.org/project/eeskew-pwg-test-000/0.1.1.dev1678597731/
</pre></div>
</div>
</div>
</div>
<p>Our page on TestPyPI now shows the README, and the documentation and repository links are available on the sidebar:</p>
<img alt="../../_images/testpypi_project_screenshot.png" src="../../_images/testpypi_project_screenshot.png" />
</section>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">#</a></h2>
<p>And that’s it!  We’ve gone through the basics of project management, packaging, and publishing on (Test)PyPI.</p>
<section id="further-reading">
<h3>Further reading<a class="headerlink" href="#further-reading" title="Permalink to this headline">#</a></h3>
<p>Some good articles for further reading:</p>
<ul class="simple">
<li><p>The official <a class="reference external" href="https://packaging.python.org/en/latest/tutorials/packaging-projects/">PyPA packaging tutorial</a> is a good place to start.</p></li>
<li><p>I have taken quite a bit of inspiration in my work from the great series <a class="reference external" href="https://cjolowicz.github.io/posts/hypermodern-python-01-setup/">Hypermodern Python</a> by Claudio Jolowicz.  It goes into much greater detail on various points of project management than I did here, and is well worth a read.</p>
<ul>
<li><p>Hypermodern Python uses the project manager <a class="reference external" href="https://python-poetry.org">Poetry</a>, not PDM (see my thoughts on that below), but PDM can do nearly everything Poetry can do, so this series is still useful.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://chriswarrick.com/blog/2023/01/15/how-to-improve-python-packaging/">How to improve Python packaging, or why fourteen tools are at least twelve too many</a> is a good overview of the mess of modern python project management tools.</p></li>
</ul>
<p>Some important accepted Python Enhancement Proposals that shape the modern python packaging ecosystem:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://peps.python.org/pep-0621/">PEP 621</a> (project metadata in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>)</p></li>
<li><p><a class="reference external" href="https://peps.python.org/pep-0508/">PEP 508</a> (dependency specification syntax)</p></li>
<li><p><a class="reference external" href="https://peps.python.org/pep-0440/">PEP 440</a> (version numbers for dependency specification)</p></li>
<li><p><a class="reference external" href="https://peps.python.org/pep-0517/">PEP 517</a> (specifying the build backend in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> independently of the build frontend)</p></li>
</ul>
</section>
<section id="other-project-management-tools">
<h3>Other project management tools<a class="headerlink" href="#other-project-management-tools" title="Permalink to this headline">#</a></h3>
<p>You’ll note that Hypermodern Python recommends using the project manager <a class="reference external" href="https://python-poetry.org">Poetry</a>.  Poetry was a cutting-edge option at the time that series was written, and it has grown to considerable popularity.  I chose not to recommend it in this tutorial for several reasons:</p>
<ul class="simple">
<li><p>Poetry is not fully <a class="reference external" href="https://peps.python.org/pep-0517/">PEP 517</a> compliant.  This means you and your users will not be able to use any other tool to build and install your project.</p></li>
<li><p>By default, Poetry imposes an upper bound on dependency version numbers.  This goes against <a class="reference external" href="https://peps.python.org/pep-0440/">Python standards</a> and will likely cause problems down the line: see articles <a class="reference external" href="https://iscinumpy.dev/post/bound-version-constraints/">here</a> and <a class="reference external" href="https://iscinumpy.dev/post/poetry-versions/">here</a>.</p></li>
<li><p>The Poetry developers chose to “deprecate” their old install script by <a class="reference external" href="https://youtu.be/Gr9o8MW_pb0?t=290"><em>causing it to randomly fail</em></a> instead of sunsetting with a typical deprecation warning.  This bizarre choice raises serious concerns about the future of the application.</p></li>
<li><p>PDM has considerably fewer open issues on GitHub than Poetry: at the time of this writing, <a class="reference external" href="https://github.com/pdm-project/pdm/issues">34</a> vs <a class="reference external" href="https://github.com/python-poetry/poetry/issues">575</a>.</p>
<ul>
<li><p>Some of this is explainable by PDM having fewer users than Poetry.  However, PDM has 4.1k stars on Github vs. Poetry’s 24.1k, so using those stars as a proxy for the number of users, we see Poetry has 17 times the number of open issues but only 6 times the number of users as PDM.</p></li>
</ul>
</li>
<li><p>The Poetry developers are famously stubborn and slow to implement new python standards, while the PDM developer is remarkably responsive and active in development.</p></li>
<li><p>Poetry is much more inflexible about resolving dependency conflicts than PDM, which quickly becomes a huge headache for complicated projects.</p></li>
</ul>
<p>Another project manager worth looking in to is <a class="reference external" href="https://hatch.pypa.io/latest/">Hatch</a>.  I don’t have any experience with this particular tool, but it does support modern Python standards and has the benefit of being an official part of the Python Packaging Authority (PyPA).  However, it does not have lockfile support, as there is not yet an established standard (PEP <a class="reference external" href="https://peps.python.org/pep-0665/">665</a> was an attempt, but it was rejected).  If you don’t need a lockfile in your work, it may be worth considering.</p>
<p>Finally, for those using <code class="docutils literal notranslate"><span class="pre">conda</span></code>, <a class="reference external" href="https://anaconda-project.readthedocs.io/en/latest/">anaconda-project</a> deserves a mention.  It isn’t a full-fledged project manager (for example, you can’t easily use it to publish on PyPI), but it does dramatically simplify sharing and running code.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "bash"
        },
        kernelOptions: {
            name: "bash",
            path: "./python_notes/pwg_presentation"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'bash'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="part1.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Project Management with PDM</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#package-version">Package version</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#packaging-the-project">Packaging the project</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-happened">What happened?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#publishing-the-project">Publishing the project</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-pypi-credentials">Setting up PyPI credentials</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-a-test-publish-pdm-script">Setting up a test-publish PDM script</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#other-project-metadata">Other project metadata</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-an-entry-point-to-the-package">Add an entry point to the package</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#updating-readme">Updating README</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#project-urls">Project URLs</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#further-reading">Further reading</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-project-management-tools">Other project management tools</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner">
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Edward Eskew
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div></div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>